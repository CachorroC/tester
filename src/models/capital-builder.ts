import { Decimal } from '@prisma/client/runtime/library';

export function capitalBuilder(
  capitalAdeudado?: string | number | null 
) {
  if ( !capitalAdeudado || typeof capitalAdeudado === 'object' ) {
    return new Decimal(
      1000 
    );
  }

  if ( typeof capitalAdeudado === 'number' ) {
    return new Decimal(
      capitalAdeudado 
    );
  }

  const copTaker = capitalAdeudado.matchAll(
    /([\d.]+)(\.\d{2}|,\d{2})$/gm 
  );

  for ( const cap of copTaker ) {
    if ( !cap ) {
      return new Decimal(
        1000 
      );
    }

    const [
      orig,
      value,
      cents
    ] = cap;
    console.log(
      orig 
    );
    console.log(
      cents 
    );

    const valueReplacer = value.replaceAll(
      /([.,\s\n\r/A-Za-zÁáÉéÍíÓóÚúÑñ-])/gm,
      '',
    );
    console.log(
      valueReplacer 
    );
    return new Decimal(
      valueReplacer 
    );
  }

  const newCapital = capitalAdeudado.replaceAll(
    /([.,\s\n\r/A-Za-zÁáÉéÍíÓóÚúÑñ-])/gm,
    '',
  );
  console.log(
    newCapital 
  );

  if ( !newCapital ) {
    return new Decimal(
      1000 
    );
  }

  return new Decimal(
    newCapital 
  );
}
/*
const caps = [
  33791309,
  26515333,
  50000000,
  13906249,
  14795920,
  25833335,
  27603820,
  12347548,
  66362958,
  12249598,
  40406421,
  44944657,
  22592582,
  11949471,
  24501535,
  27373832,
  24807317,
  29416113,
  15324570,
  56987692,
  28018855,
  77376262,
  22111021,
  80906224,
  149444779,
  49329779,
  46537671,
  42598393,
  25252953,
  39472561,
  29090298,
  24994278,
  19218060,
  19188290,
  20815024,
  28820731,
  19170517,
  24843938,
  91487785,
  55099216,
  43725000,
  86945177,
  94472793,
  26690131,
  140332319,
  20488522,
  42647591,
  51081164,
  16827889,
  21652918,
  43869730,
  25766202,
  255635733,
  34080282,
  89544516,
  58421147,
  56478909,
  106398151,
  104393034,
  70393714,
  17492978,
  78458975,
  73309267,
  73348449,
  48451989,
  85581623,
  50683098,
  100379249,
  168578525,
  25852498,
  35774452,
  25015388,
  150043737,
  73608894,
  46179087,
  null,
  null,
  29690679,
  107818114,
  54812000,
  26464177,
  12956286,
  12537973,
  21530598,
  96125453,
  83955014,
  12128189,
  17632026,
  43921469,
  16497280.67,
  211610990.96,
  17256863,
  21613985,
  25519225,
  44742148,
  12687427,
  22277206,
  13319130,
  87649981,
  24590710,
  28594039.72,
  41990538.4,
  14068639,
  27819414.85,
  54090336.47,
  10555422.24,
  43653352.35,
  30506109.17,
  46109381.26,
  44933312.09,
  12993948,
  18506671.61,
  14404721,
  11796195,
  94533342.61,
  14645610.58,
  25766204,
  48498609.53,
  25845668.94,
  28485816,
  15018661,
  42530688,
  19977436.31,
  76735593.18,
  11853652,
  22130224,
  32318533.04,
  34749647,
  36331525,
  50509238,
  38847950,
  24000000,
  31100998.65,
  40942872,
  10382732.2,
  21049111.79,
  22244760,
  17502203,
  14270897,
  39146947,
  14534881,
  17217065.98,
  18100698.65,
  15086199,
  10930099,
  14409411,
  35608653,
  33000833,
  20353079,
  32026446,
  17667402,
  39855851,
  12864472,
  24849682.04,
  41372567.65,
  40589422,
  162012163.13,
  '33.175.721.69',
  '29925624',
  25184150,
  '16313851',
  '134026609',
  25758912,
  '78.071.921.68',
  15946341,
  '50000000+ 6007,134',
  '23326974',
  '15.987.259.39',
  '24792093',
  13684674,
  '67068123',
  '15.391.508.11',
  '58957417',
  null,
  '37209133/3162345',
  '4513074195981020//3778813009303695',
  17307303,
  null,
  '51.217.496.86',
  '48.945.056.03',
  '0377813522815548//209901793015',
  '5303716097990273// AUDIOPRESTAMOS',
  '26815877',
  '9633585',
  '12707877,16',
  '16006640',
  23090872,
  '19865254',
  '62998254',
  2078520,
  2078520,
  '11832595',
  28468389.3,
  '35031244,39',
  '22309546',
  null,
  16302624.57,
  '97712903,24',
  18400664.75,
  '35544456',
  116728485.24,
  '28250394',
  '12.847.942.00',
  42898,
  '21493086',
  '15445371,43',
  '20600721.70',
  50511309,
  '12845011',
  '173618623',
  16302624.57,
  74069981.73,
  '24193522',
  null,
  78297335,
  '44110828,47',
  null,
  17517434,
  19693962.83,
  '11590469,44',
  23640676,
  16208318.7,
  17337417,
  '39576493',
  '14.272.971.42',
  '24227539,02',
  '11777235',
  null,
  '8451598',
  '5491580435077256 / 5303719778865608',
  20568240.8,
  '37074975,05',
  '95244711,50',
  '19146744,45',
  '46027552,56',
  '79.862.886.23',
  null,
  '16215928,08',
  17280116.74,
  '54468401,36',
  3244441,
  13688162,
  13303854.54,
  '21660562,20',
  25119879,
  12433690.05,
  98478180.94,
  16305608.56,
  20501855.28,
  '17831989,06',
  18077141.41,
  '1092045',
  '20987589',
  55929373,
  42951,
  42951,
  null,
  '14675091',
  51302541.46,
  13149185,
  '12046670,53',
  '12477030,70/',
  42965,
  '57161766,97',
  24624884.19,
  54428394.17,
  12203589,
  41735442,
  '19926084.89',
  '45758347.68',
  91986323.18,
  38664282.6,
  '28130302.27',
  '123933432.79',
  '9079297',
  10481215,
  '53995817.72',
  '377813515714351 // 4513084893961108',
  84049009,
  '30873492',
  '51748331.77',
  '47820559',
  null,
  76394840,
  '20221005.96',
  ' 40423614,08\r\n',
  41371150.58,
  null,
  183128611.42,
  '18653826',
  '12000000',
  '120292568,22',
  null,
  ' 40423614,08\r\n',
  30526136,
  118940346.21,
  '18141791,96',
  '8108220,66',
  '46042338',
  '13487506,39',
  41576997.45,
  '16618551,39',
  '20211828,93',
  '18696053',
  '39243095,51',
  '68421268,51',
  '25340036,69',
  25833335,
  '41262275,97',
  10928053.07,
  42969,
  '71966685,93',
  42971,
  '38393691,10',
  '47317351,97',
  '25303069,52',
  124710637.08,
  '16983619,12',
  '29204879,50',
  34506454.83,
  54240142.64,
  '60804048,55',
  '30556160,98',
  '23404368,57',
  36520798.77,
  '12660698,89',
  '12573628,72',
  '27490437,92',
  '12241665,48',
  42977,
  '12963196,36',
  '50891805,53',
  '13810342,55',
  15864393.53,
  '51145474,58',
  '36182458,10',
  '23287784,32',
  '19290331,91',
  18546820.62,
  13622019.38,
  '102825603,06',
  29908812.31,
  null,
  '19.844.757.17',
  '15.414.194.82',
  '31.688.075.43',
  '90.276.951.42',
  '60.433.884.09',
  '21.616.444.55',
  '12.677.786.00',
  '21.740.168.69',
  '37.800.911.06',
  '35.432.721.58',
  '18.012.121.45',
  '17.635.164.44',
  '49.971.067.69',
  '46.432.606.87',
  56386936,
  '26.469.309.75',
  15114966.31,
  15311681,
  '6.165.522.03',
  '13.036.109.81',
  '79.266.368.98',
  '16.242.560.72',
  '18.220.483.45',
  '15.840.545.83',
  '21.435.278.32',
  '36.756.277.00',
  '67.660.913.00',
  32830090.4,
  48855784.15,
  '105.666.670.22',
  '15.921.423.12',
  '26/09/2017',
  '14.586.242.26',
  '12.918.060.89',
  '11.599.559.60',
  '46.086.886.44',
  23454012,
  '02 / 10/2017',
  '21.109.451.00',
  '15.488.696.00',
  21223176.08,
  '60.495.232.79',
  '13.869.971.40',
  '55.186.030.51',
  20063065.47,
  '96.442.977.80',
  '28.432.149.77',
  '19.678.334.90',
  43021,
  '153.236.346.48',
  12534383.08,
  '61.821.425.75',
  11961380.9,
  18368757.23,
  '70.693.047.83',
  '83.592.166.60',
  '20.515.858.82',
  '10.761.991.62',
  '10.668.327.59',
  12521212,
  '21.139.648.63',
  '47.230.309.94',
  '15.008.514.94',
  43033,
  '24.165.959.99',
  27247328.27,
  '13.867.980.00',
  '87.015.973.35',
  '19.362.960.22',
  '35.732.574.50',
  null,
  '19.550.288.60',
  null,
  13537827.69,
  '36.103.545.25',
  43041,
  '38.034.170.49',
  '18.898.421.00',
  '13.464.765.14',
  '18.295.501.00',
  36069195,
  14986915,
  '12.731.580.01',
  43053,
  '12.767.956.00',
  12944433,
  '12.938.618.00',
  '11.831.747.86',
  '17.074.755.31',
  '24.965.682.98',
  '16.487.437.90',
  24172046.91,
  '162.645.743.97',
  '34.896.224.94',
  '30.573.555.51',
  '22.149.641.28',
  '8.725.321.75',
  '15.576.784.43',
  '42.269.61',
  '04/12/2017',
  '60.161.467.78',
  '23.970.146.05',
  19041643.2,
  29419277.35,
  '36.307.716.54',
  '51.466.338.84',
  17921982,
  '10725698,04',
  '27006100,92',
  '66255617,24',
  '13503258',
  '17/01/2018',
  40292979.74,
  40292979.74,
  '24878276,25',
  '11224313',
  '14735254,21',
  30413921.26,
  15344261,
  26468936,
  '27,696,651,24',
  null,
  48945502.05,
  '25,857,393,66',
  '25,863,164,23',
  '13,974,554,00',
  14467701,
  '52,854,078,34',
  '40,477,377,34',
  '17,247,376,00',
  '26,633,997,29',
  '41.146.013.90',
  '27.607,878,44',
  '18,236,088,30',
  '12,024,877,15',
  '17,508,189,65',
  '22,835,665,00',
  '21,817,515,53',
  '19,865,454,27',
  '21,470,052,05',
  10224254.04,
  43208,
  51606071,
  '23,159,598,56',
  43211,
  '13,704,853,48',
  23440287.8,
  '19,715,538,64',
  '18,240,978,00',
  '27,503,283,22',
  '13,098,176,52',
  '21.770.748.74',
  '14.054.721.06',
  '29.045.383.03',
  43214,
  30053474.95,
  43237,
  '12,204,639,17',
  '32,124,573,85',
  '38,569,581,81',
  22725077.61,
  '13,337,934,00',
  '25,527,457,86',
  '14,670,023,70',
  '17,141,891,22',
  18780239.49,
  '13,303,941,88',
  '8/06/208',
  29143861.48,
  43265,
  '19.260.500.00',
  14744173.99,
  14170111.31,
  '21.550.202.58',
  10691309.66,
  '11,080,107,68',
  15580021,
  '14,997,448,00',
  24310470,
  '24.765.475.00',
  '32.492.443.00',
  '9/07/25018',
  22458995,
  21997013.43,
  43293,
  '25,303,711,97',
  null,
  16881706.3,
  '14,770,792,00',
  '26/07/2018',
  '12.555.416.18',
  '15.720.013.94',
  null,
  '23.110.934.37',
  '21/08/2018',
  '16.147.359.00',
  '12.821.536.32',
  '12.768.627.00',
  '35.321.033.75',
  '14.134.623.00',
  26503794.57,
  '16.492.041.34',
  '12.827.556.00',
  '12/09/2018',
  '12/09/2018',
  '23.041.704.34',
  '13/09/2018',
  '12.456.703',
  '21.035.323.59',
  '16.225.494.45',
  29229158.74,
  '23.678920.60',
  '19.491.278.99',
  31627561.81,
  '15.631.923.00',
  '22/10/2018',
  14634268.88,
  15426758.96,
  '02/11/2018',
  '16.585.595.00',
  '40.828.299.00',
  '41.522.255.15',
  '05/12/2018',
  '07/11/2018',
  14123185.45,
  '16.800.337.38',
  '30/01/2019',
  '12203649,80',
  30056040.61,
  '13.871.976.56',
  '20.616.779.01',
  '29.723.047.63',
  '22.144.741.93',
  '19,951,135,95',
  null,
  '13,180,105',
  29140667.39,
  46371154.05,
  '35.424.539.22',
  13583148,
  18772901.56,
  16862839.53,
  26806038,
  null,
  null,
  null,
  null,
  null,
  40696764,
  '29366625.40',
  '17.882.476.98',
  65371302,
  13144437,
  31804872,
  96608106,
  32926699,
  27602951.6,
  115224735.56,
  65355736.17,
  44309784.97,
  99119191.26,
  46118716.63,
  29908812.31,
  '21596919',
  '206655465,99',
  '33.615.204.45',
  10775194.27,
  '27308454,64'
];

for ( const cap of caps ) {
  console.log(
    capitalBuilder(
      cap
    )
  );
} */
